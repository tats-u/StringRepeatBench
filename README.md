# String Repeat Benchmarks

Benchmarks for candidate algorithms for `System.String.Repeat`.

## Recommended usage

```bash
dotnet run -c Release -- --statisticalTest 5% -f "*"
```

`--statisticalTest 5%` performs the Mann-Whitney U test with a 5% significance level.

If you feel like this benchmark takes too long to run, you might want to add `--maxIterationCount 50` (or less value) to the command above.

If you want to add or change runtimes, you might want to add `-r <baseline runtime> <another runtime #1> <another runtime #2>`.

### Generated results

The results are stored in `./BenchmarkDotNet.Artifacts/results/`.

## Results

Command:

```bash
dotnet run -c Release -- --runtimes net8.0 nativeaot8.0 --statisticalTest 5% -f "*"
```

Results:

```

BenchmarkDotNet v0.13.12, Windows 11 (10.0.22631.3593/23H2/2023Update/SunValley3)
Intel Core i7-9700 CPU 3.00GHz, 1 CPU, 8 logical and 8 physical cores
.NET SDK 8.0.300-preview.24203.14
  [Host]     : .NET 8.0.5 (8.0.524.21615), X64 RyuJIT AVX2
  DefaultJob : .NET 8.0.5 (8.0.524.21615), X64 RyuJIT AVX2


```
| Method                | Input              | Count | Mean            | Error         | StdDev        | Ratio | MannWhitney(5%) | RatioSD | Gen0     | Gen1     | Gen2     | Allocated | Alloc Ratio |
|---------------------- |------------------- |------ |----------------:|--------------:|--------------:|------:|---------------- |--------:|---------:|---------:|---------:|----------:|------------:|
| **RepeatBase**            | **👍**                 | **3**     |        **22.89 ns** |      **0.077 ns** |      **0.064 ns** |  **1.00** | **Base**            |    **0.00** |   **0.0204** |        **-** |        **-** |     **128 B** |        **1.00** |
| RepeatNoCounter       | 👍                 | 3     |        14.57 ns |      0.026 ns |      0.023 ns |  0.64 | Faster          |    0.00 |   0.0063 |        - |        - |      40 B |        0.31 |
| RepeatDoubleBlockSize | 👍                 | 3     |        18.45 ns |      0.087 ns |      0.082 ns |  0.81 | Faster          |    0.00 |   0.0063 |        - |        - |      40 B |        0.31 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👍**                 | **7**     |        **33.29 ns** |      **0.139 ns** |      **0.116 ns** |  **1.00** | **Base**            |    **0.00** |   **0.0229** |        **-** |        **-** |     **144 B** |        **1.00** |
| RepeatNoCounter       | 👍                 | 7     |        25.56 ns |      0.098 ns |      0.076 ns |  0.77 | Faster          |    0.00 |   0.0089 |        - |        - |      56 B |        0.39 |
| RepeatDoubleBlockSize | 👍                 | 7     |        26.06 ns |      0.057 ns |      0.053 ns |  0.78 | Faster          |    0.00 |   0.0089 |        - |        - |      56 B |        0.39 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👍**                 | **15**    |        **55.13 ns** |      **0.187 ns** |      **0.174 ns** |  **1.00** | **Base**            |    **0.00** |   **0.0280** |        **-** |        **-** |     **176 B** |        **1.00** |
| RepeatNoCounter       | 👍                 | 15    |        47.31 ns |      0.156 ns |      0.130 ns |  0.86 | Faster          |    0.00 |   0.0140 |        - |        - |      88 B |        0.50 |
| RepeatDoubleBlockSize | 👍                 | 15    |        34.24 ns |      0.082 ns |      0.069 ns |  0.62 | Faster          |    0.00 |   0.0140 |        - |        - |      88 B |        0.50 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👍**                 | **1023**  |     **2,839.53 ns** |      **6.399 ns** |      **5.672 ns** |  **1.00** | **Base**            |    **0.00** |   **0.6676** |        **-** |        **-** |    **4208 B** |        **1.00** |
| RepeatNoCounter       | 👍                 | 1023  |     2,798.88 ns |     14.355 ns |     11.987 ns |  0.99 | Same            |    0.01 |   0.6561 |        - |        - |    4120 B |        0.98 |
| RepeatDoubleBlockSize | 👍                 | 1023  |       238.13 ns |      2.386 ns |      2.232 ns |  0.08 | Faster          |    0.00 |   0.6561 |        - |        - |    4120 B |        0.98 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👍**                 | **16383** |    **43,457.62 ns** |     **73.345 ns** |     **61.246 ns** |  **1.00** | **Base**            |    **0.00** |  **10.3760** |        **-** |        **-** |   **65648 B** |        **1.00** |
| RepeatNoCounter       | 👍                 | 16383 |    43,607.55 ns |    198.688 ns |    176.131 ns |  1.00 | Same            |    0.00 |  10.3760 |        - |        - |   65560 B |        1.00 |
| RepeatDoubleBlockSize | 👍                 | 16383 |     2,670.14 ns |     39.730 ns |     31.019 ns |  0.06 | Faster          |    0.00 |  10.4141 |        - |        - |   65560 B |        1.00 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)🏿👍 [127]** | **3**     |        **55.98 ns** |      **0.154 ns** |      **0.128 ns** |  **1.00** | **Base**            |    **0.00** |   **0.1390** |        **-** |        **-** |     **872 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)🏿👍 [127] | 3     |        48.14 ns |      0.368 ns |      0.344 ns |  0.86 | Faster          |    0.01 |   0.1249 |        - |        - |     784 B |        0.90 |
| RepeatDoubleBlockSize | 👨‍(...)🏿👍 [127] | 3     |        51.68 ns |      0.423 ns |      0.375 ns |  0.92 | Faster          |    0.01 |   0.1249 |        - |        - |     784 B |        0.90 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)🏿👍 [127]** | **7**     |       **112.02 ns** |      **1.459 ns** |      **1.364 ns** |  **1.00** | **Base**            |    **0.00** |   **0.3009** |        **-** |        **-** |    **1888 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)🏿👍 [127] | 7     |       105.31 ns |      1.263 ns |      1.120 ns |  0.94 | Faster          |    0.01 |   0.2869 |        - |        - |    1800 B |        0.95 |
| RepeatDoubleBlockSize | 👨‍(...)🏿👍 [127] | 7     |       103.41 ns |      0.665 ns |      0.622 ns |  0.92 | Faster          |    0.01 |   0.2869 |        - |        - |    1800 B |        0.95 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)🏿👍 [127]** | **15**    |       **224.18 ns** |      **1.343 ns** |      **1.191 ns** |  **1.00** | **Base**            |    **0.00** |   **0.6249** |        **-** |        **-** |    **3920 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)🏿👍 [127] | 15    |       215.31 ns |      2.317 ns |      2.168 ns |  0.96 | Same            |    0.01 |   0.6108 |        - |        - |    3832 B |        0.98 |
| RepeatDoubleBlockSize | 👨‍(...)🏿👍 [127] | 15    |       190.65 ns |      0.684 ns |      0.534 ns |  0.85 | Faster          |    0.01 |   0.6108 |        - |        - |    3832 B |        0.98 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)🏿👍 [127]** | **1023**  |    **90,507.69 ns** |  **1,795.366 ns** |  **2,795.168 ns** |  **1.00** | **Base**            |    **0.00** |  **76.9043** |  **76.9043** |  **76.9043** |  **259978 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)🏿👍 [127] | 1023  |    89,657.49 ns |  1,749.463 ns |  2,452.503 ns |  0.99 | Same            |    0.04 |  76.9043 |  76.9043 |  76.9043 |  259890 B |        1.00 |
| RepeatDoubleBlockSize | 👨‍(...)🏿👍 [127] | 1023  |    55,252.82 ns |  1,098.382 ns |  1,307.546 ns |  0.61 | Faster          |    0.03 |  76.9043 |  76.9043 |  76.9043 |  259890 B |        1.00 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)🏿👍 [127]** | **16383** | **1,422,099.84 ns** | **28,347.509 ns** | **46,575.770 ns** |  **1.00** | **Base**            |    **0.00** | **998.0469** | **998.0469** | **998.0469** | **4161728 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)🏿👍 [127] | 16383 | 1,411,322.73 ns | 28,058.481 ns | 37,457.266 ns |  0.99 | Same            |    0.04 | 998.0469 | 998.0469 | 998.0469 | 4161640 B |        1.00 |
| RepeatDoubleBlockSize | 👨‍(...)🏿👍 [127] | 16383 |   806,655.03 ns | 15,251.728 ns | 16,319.178 ns |  0.57 | Faster          |    0.02 | 999.0234 | 999.0234 | 999.0234 | 4161640 B |        1.00 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)‍🧑 [128]**  | **3**     |        **55.88 ns** |      **0.237 ns** |      **0.198 ns** |  **1.00** | **Base**            |    **0.00** |   **0.1402** |        **-** |        **-** |     **880 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)‍🧑 [128]  | 3     |        48.21 ns |      0.393 ns |      0.368 ns |  0.86 | Faster          |    0.01 |   0.1262 |        - |        - |     792 B |        0.90 |
| RepeatDoubleBlockSize | 👨‍(...)‍🧑 [128]  | 3     |        51.57 ns |      0.456 ns |      0.404 ns |  0.92 | Faster          |    0.01 |   0.1262 |        - |        - |     792 B |        0.90 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)‍🧑 [128]**  | **7**     |       **114.00 ns** |      **0.973 ns** |      **0.863 ns** |  **1.00** | **Base**            |    **0.00** |   **0.3034** |        **-** |        **-** |    **1904 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)‍🧑 [128]  | 7     |       103.51 ns |      0.750 ns |      0.701 ns |  0.91 | Faster          |    0.01 |   0.2894 |        - |        - |    1816 B |        0.95 |
| RepeatDoubleBlockSize | 👨‍(...)‍🧑 [128]  | 7     |       101.92 ns |      0.877 ns |      0.777 ns |  0.89 | Faster          |    0.01 |   0.2894 |        - |        - |    1816 B |        0.95 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)‍🧑 [128]**  | **15**    |       **239.19 ns** |      **2.156 ns** |      **2.017 ns** |  **1.00** | **Base**            |    **0.00** |   **0.6294** |        **-** |        **-** |    **3952 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)‍🧑 [128]  | 15    |       223.81 ns |      1.764 ns |      1.564 ns |  0.94 | Faster          |    0.01 |   0.6156 |        - |        - |    3864 B |        0.98 |
| RepeatDoubleBlockSize | 👨‍(...)‍🧑 [128]  | 15    |       194.97 ns |      1.993 ns |      1.767 ns |  0.81 | Faster          |    0.01 |   0.6156 |        - |        - |    3864 B |        0.98 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)‍🧑 [128]**  | **1023**  |    **90,700.12 ns** |  **1,795.797 ns** |  **2,575.478 ns** |  **1.00** | **Base**            |    **0.00** |  **76.9043** |  **76.9043** |  **76.9043** |  **262026 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)‍🧑 [128]  | 1023  |    91,014.81 ns |  1,791.598 ns |  2,569.457 ns |  1.00 | Same            |    0.04 |  76.9043 |  76.9043 |  76.9043 |  261938 B |        1.00 |
| RepeatDoubleBlockSize | 👨‍(...)‍🧑 [128]  | 1023  |    55,725.70 ns |  1,070.999 ns |  1,429.753 ns |  0.62 | Faster          |    0.02 |  76.9043 |  76.9043 |  76.9043 |  261938 B |        1.00 |
|                       |                    |       |                 |               |               |       |                 |         |          |          |          |           |             |
| **RepeatBase**            | **👨‍(...)‍🧑 [128]**  | **16383** | **1,401,754.49 ns** | **26,181.181 ns** | **29,100.313 ns** |  **1.00** | **Base**            |    **0.00** | **998.0469** | **998.0469** | **998.0469** | **4194496 B** |        **1.00** |
| RepeatNoCounter       | 👨‍(...)‍🧑 [128]  | 16383 | 1,435,287.58 ns | 28,104.295 ns | 42,065.186 ns |  1.02 | Same            |    0.04 | 998.0469 | 998.0469 | 998.0469 | 4194408 B |        1.00 |
| RepeatDoubleBlockSize | 👨‍(...)‍🧑 [128]  | 16383 |   804,809.14 ns | 15,092.712 ns | 16,775.509 ns |  0.57 | Faster          |    0.02 | 999.0234 | 999.0234 | 999.0234 | 4194408 B |        1.00 |
